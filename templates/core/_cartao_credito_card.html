{% load static %}
{% load br_filters %}
<div class="cartao-visual {{ cartao.nome|lower|slugify }}" style="position:relative; border-radius:18px; min-width:260px; max-width:320px; height:180px; width:100%; background: linear-gradient(135deg, {{ cartao.nome|banco_cor }} 0%, #414345 100%); color:#fff; box-shadow:0 2px 8px #0002; text-shadow:0 1px 2px rgba(0,0,0,0.25); overflow:hidden;">
    <!-- Logo do banco/cartão no topo direito -->
    {% if cartao.nome|lower == 'neon' %}
        <img class="banco-logo" src="{% static 'imagens/cartoes/neon.png' %}" alt="Neon" style="position:absolute;top:14px;right:18px;height:44px;width:44px;object-fit:contain;z-index:2;">
    {% elif cartao.nome|lower == 'inter' %}
        <img class="banco-logo" src="{% static 'imagens/cartoes/banco-inter-logo-9-1536x390.png' %}" alt="Inter" style="position:absolute;top:14px;right:18px;height:44px;width:44px;object-fit:contain;z-index:2;">
    {% elif cartao.nome|lower == 'nubank' %}
        <img class="banco-logo" src="{% static 'imagens/cartoes/nubank.png' %}" alt="Nubank" style="position:absolute;top:14px;right:18px;height:44px;width:44px;object-fit:contain;z-index:2;">
    {% endif %}
    <div style="padding: 1.2rem 1.2rem 0.7rem 1.2rem; height:100%; display:flex; flex-direction:column; justify-content:flex-start;">
        <div style="font-weight:700;font-size:1.1rem; margin-bottom:0.2rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:60%">{{ cartao.nome }}</div>
        <div style="margin:0.1rem 0 0.4rem 0;display:flex;align-items:center;gap:0.7rem;">
            <span style="background:#C0C0C0;border-radius:6px;width:32px;height:22px;display:inline-block;"></span>
            <span style="font-size:1rem;letter-spacing:2px;">**** {{ cartao.numero|slice:'-4:' }}</span>
        </div>
        <div style="font-size:0.95rem;font-weight:600;letter-spacing:1px; margin-bottom:0.7rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:70%">{{ cartao.usuario.first_name|default:cartao.usuario.username|upper }}</div>
        <div class="cartao-info" style="margin-top:0.2rem; width:100%;">
            <div class="cartao-row">
                <span class="cartao-label">Fatura:</span>
                <span class="cartao-value">{{ cartao.fatura_valor|default_if_none:"—"|br_currency }}</span>
            </div>
            <div class="cartao-row">
                <span class="cartao-label">Limite:</span>
                <span class="cartao-value cartao-value-bold">{{ cartao.limite_valor|default_if_none:"—"|br_currency }}</span>
            </div>
            <div class="cartao-row">
                <span class="cartao-label">Utilizado:</span>
                <span class="cartao-value">{{ cartao.utilizado_valor|default_if_none:"—"|br_currency }}</span>
            </div>
            <div class="cartao-row">
                <span class="cartao-label">Saldo:</span>
                <span class="cartao-value cartao-value-saldo">{{ cartao.saldo_valor|default_if_none:"—"|br_currency }}</span>
            </div>
        </div>
    </div>
    <!-- Logo da bandeira no rodapé direito -->
    {% if cartao.bandeira == 'visa' %}
        <img src="{% static 'imagens/cartoes/visa-logo-2-1.png' %}" alt="Visa" style="position:absolute;bottom:16px;right:16px;width:36px;height:auto;opacity:0.9;z-index:2;">
    {% elif cartao.bandeira == 'mastercard' %}
        <img src="{% static 'imagens/cartoes/mastercard-logo-3-2.png' %}" alt="Mastercard" style="position:absolute;bottom:16px;right:16px;width:36px;height:auto;opacity:0.9;z-index:2;">
    {% endif %}
</div>
<!-- CSS customizado para o cartão -->
<style>
.cartao-row {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 0.7rem;
    margin-bottom: 0.2rem;
}
.cartao-label {
    color: #fff;
    font-weight: 500;
    text-shadow: 0 1px 2px #0008;
    min-width: 70px;
    max-width: 90px;
    flex-shrink: 0;
}
.cartao-value {
    color: #fff;
    font-weight: 600;
    text-shadow: 0 1px 2px #0008;
    word-break: break-all;
    flex: 1;
}
.cartao-value-bold {
    font-weight: 700;
}
.cartao-value-saldo {
    color: #00ffae;
    font-weight: 700;
    text-shadow: 0 1px 2px #0008;
}
</style> 